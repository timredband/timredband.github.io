---
title: 'Advent of code 2023 - day 1'
date: 2023-12-03
slug: advent-of-code-2023-day-1
tags:
    - go
    - advent of code 2023
---

Learning Go through problem solving

---

It's time for another year of [advent of code](https://adventofcode.com/2023). I'm tackling this year's set of problems in [Go](https://go.dev/), a language I have never written a single line of code in. I've been interested in learning Go for a while now and think this is a good opportunity to give it a try.

I will be attempting to solve each day's problems using nothing but the various official [Go docs](https://go.dev/learn/). I'm sure my solutions will be far from idiomatic Go. I hope as the month goes on I will be able to better learn the Go way of writing code.

If you see some mistakes or have a suggestion of a better way to do something please open an issue [here](https://github.com/timredband/timredband.github.io). I will be leaving various questions I have in the code as I go. The goal is to have them all answered by the end of the month.

Enough with the intro. Let's get started!

## Part One

### Understanding the problem

Read the problem [here](https://adventofcode.com/2023/day/1). The general idea is for each line in the input to combine the first and last numbers.

```
1abc2
pqr3stu8vwx
a1b2c3d4e5f
treb7uchet
```

For the given example we want to return the following:

```
12, 38, 15, 77
```

Here is the input with each side trimmed so the numbers we want are on the left and right to make it more clear.

```
1abc2
3stu8
1b2c3d4e5
7
```

The solution needs to read in each line and then search each line forwards and backwards for the first and last number.

### Solution

The first thing to figure out is how to read in a file in Go. After some googling I came up with this utility function to read in each input that I will use moving forward.

```go
package file

import (
	"bufio"
	"log"
	"os"
)

func ReadFile(name string) []string {
	file, err := os.Open(name)

	if err != nil {
		log.Fatal(err)
	}

	defer file.Close()

	var inputs []string

	scanner := bufio.NewScanner(file)
	for scanner.Scan() {
		line := scanner.Text()
		if len(line) == 0 {
			continue
		}
		inputs = append(inputs, line)
	}

	return inputs
}
```

Now I want to process each line and find the first and last number in each line. To do this I will need a way to know if a character is an integer. Looks like the [strconv](https://pkg.go.dev/strconv) library is the way to do it.

Once I know the first number and the last number to combine them I will need to multiply the first number by ten and then add the numbers together and that should be the answer for each line.

```go
var inputs []string = file.ReadFile("inputs/1.txt")

result := 0

for _, input := range inputs {
    i, j := 0, len(input)-1
    left, right := -1, -1

    for left == -1 || right == -1 {
        if num, err := strconv.Atoi(string(input[i])); left == -1 && err == nil {
            left = num
        }

        if num, err := strconv.Atoi(string(input[j])); right == -1 && err == nil {
            right = num
        }

        i += 1
        j -= 1
    }

    result += ((left * 10) + right)
}

fmt.Println(result)
```

That's it for part 1. Pretty straightforward I think. My biggest question is if I'm reading in a file in the best way.

## Part Two

### Understanding the problem

Part two adds a slight twist to the original problem. There are hidden english words in the input that have the same precedence as a digit. If a word comes before a digit then it counts as the first/last word in the line.

```
abcone2threexyz -> 13
xtwone3four -> 24
```

### Solution

My approach to this one is going to be find the first and last digit the same way as part one, but I'm also going to save the index that I find each one. Using that index I'm going to iterate each word zero to nine up to the first index and see if I find a lower index that contains each word. I'll do the same for the last number by starting at the index of the last number and searching to the end for each word.

```go
var inputs []string = file.ReadFile("input.txt")
words := []string{"zero", "one", "two", "three", "four", "five", "six", "seven", "eight", "nine"}

result := 0

for _, input := range inputs {
    i, j := 0, len(input)-1
    left, right := -1, -1
    leftIndex, rightIndex := -1, -1

    for left == -1 || right == -1 {
        if num, err := strconv.Atoi(string(input[i])); left == -1 && err == nil {
            left = num
            leftIndex = i
        }

        if num, err := strconv.Atoi(string(input[j])); right == -1 && err == nil {
            right = num
            rightIndex = j
        }

        i += 1
        j -= 1
    }

    for i, word := range words {
        if index := strings.Index(input[:leftIndex+1], word); index != -1 {
            leftIndex = index
            left = i
        }

        if index := strings.LastIndex(input[rightIndex:], word); index != -1 {
            rightIndex = index + rightIndex
            right = i
        }
    }

    result += ((left * 10) + right)
}

fmt.Println(result)
```

That concludes day one. Anthing I could have done better? Let me know!
